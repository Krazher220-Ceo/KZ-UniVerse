# üì± –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–ª—è KZ UniVerse

## üîß –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. Telegram WebApp –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `TelegramLogin` –¥–ª—è –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Telegram
- ‚úÖ API endpoint `/api/telegram-auth` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤ (Telegram ‚Üî Web)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ Telegram –¥–∞–Ω–Ω—ã—Ö –≤ localStorage

### 2. Telegram Bot
- ‚úÖ –ë–æ—Ç –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã: `/start`, `/universities`, `/search`, `/chances`
- ‚úÖ AI-—á–∞—Ç —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º API

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram WebApp

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å WebApp

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ BotFather –∫–æ–º–∞–Ω–¥—É `/newapp`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
3. –£–∫–∞–∂–∏—Ç–µ:
   - Title: KZ UniVerse
   - Description: –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤
   - Photo: –∑–∞–≥—Ä—É–∑–∏—Ç–µ –ª–æ–≥–æ—Ç–∏–ø
   - Web App URL: `https://your-domain.com`

### –®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local`:

```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
```

## ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cd telegram-bot
npm install
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` –≤ –ø–∞–ø–∫–µ `telegram-bot`:

```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
API_URL=https://your-domain.com
```

### –ó–∞–ø—É—Å–∫

```bash
npm start
```

## üìã –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- `/universities` - –°–ø–∏—Å–æ–∫ —Ç–æ–ø —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤
- `/search <–Ω–∞–∑–≤–∞–Ω–∏–µ>` - –ü–æ–∏—Å–∫ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞
- `/chances` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞—Å—á–µ—Ç–µ —à–∞–Ω—Å–æ–≤
- –õ—é–±–æ–π —Ç–µ–∫—Å—Ç - AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è Telegram –¥–∞–Ω–Ω—ã—Ö

–í production –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é:

```typescript
import crypto from 'crypto'

function validateTelegramAuth(data: any, botToken: string): boolean {
  const { hash, ...userData } = data
  const dataCheckString = Object.keys(userData)
    .sort()
    .map(key => `${key}=${userData[key]}`)
    .join('\n')
  
  const secretKey = crypto
    .createHmac('sha256', 'WebAppData')
    .update(botToken)
    .digest()
  
  const calculatedHash = crypto
    .createHmac('sha256', secretKey)
    .update(dataCheckString)
    .digest('hex')
  
  return calculatedHash === hash
}
```

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏:
1. –ß–µ—Ä–µ–∑ –≤–µ–±-—Ñ–æ—Ä–º—É (email + –∏–º—è)
2. –ß–µ—Ä–µ–∑ Telegram WebApp

–û–±–∞ —Å–ø–æ—Å–æ–±–∞ —Å–æ–∑–¥–∞—é—Ç –∞–∫–∫–∞—É–Ω—Ç –≤ —Å–∏—Å—Ç–µ–º–µ, –∫–æ—Ç–æ—Ä—ã–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑:
- `telegramId` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
- `source` - –∏—Å—Ç–æ—á–Ω–∏–∫ –≤—Ö–æ–¥–∞ ('web' | 'telegram')

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ WebApp

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é (‚ò∞)
3. –í—ã–±–µ—Ä–∏—Ç–µ "KZ UniVerse" –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ WebApp –∫–Ω–æ–ø–∫—É
4. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

## ‚úÖ Checklist

- [ ] –°–æ–∑–¥–∞–Ω –±–æ—Ç —á–µ—Ä–µ–∑ BotFather
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω WebApp
- [ ] –î–æ–±–∞–≤–ª–µ–Ω —Ç–æ–∫–µ–Ω –≤ `.env.local`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram
- [ ] –ó–∞–ø—É—â–µ–Ω Telegram Bot
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤

---

**–ì–æ—Ç–æ–≤–æ! Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç.**


